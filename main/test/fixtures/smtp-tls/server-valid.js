// Generated by CoffeeScript 1.10.0

/*
 * server-checker : test/fixtures/smtp-tls/server-valid
 * Author: MrKMG (https://github.com/mrkmg)
 *
 * MIT License
 */

(function() {
  var SMTPServer, _, fs;

  SMTPServer = require('smtp-server').SMTPServer;

  _ = require('underscore');

  fs = require('fs');

  module.exports = function() {
    var client;
    client = new SMTPServer({
      secure: false,
      logger: false,
      hideSTARTTLS: false,
      key: fs.readFileSync('main/test/fixtures/smtp-tls/certs/valid.key'),
      cert: fs.readFileSync('main/test/fixtures/smtp-tls/certs/valid.cert')
    });
    return {
      start: function(port, callback) {
        return client.listen(port, 'localhost', callback);
      },
      stop: function(callback) {
        if (!_.isFunction(callback)) {
          callback = _.noop;
        }
        return client.close(callback);
      }
    };
  };

}).call(this);
